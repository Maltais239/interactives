<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Map Geography Game</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e22ce 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3), transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(138, 43, 226, 0.2), transparent 50%);
            pointer-events: none;
            animation: pulse 8s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        #gameContainer {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 
                0 30px 90px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.1) inset;
            max-width: 1200px;
            position: relative;
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2.5em;
            font-weight: 800;
            margin-bottom: 8px;
            letter-spacing: -1px;
        }

        #info {
            text-align: center;
            font-size: 1.2em;
            color: #64748b;
            margin-bottom: 30px;
            min-height: 40px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        #info.success {
            transform: scale(1.05);
        }

        .emoji {
            font-size: 1.4em;
            display: inline-block;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        #mapContainer {
            border-radius: 16px;
            background: linear-gradient(180deg, #e0f2fe 0%, #bae6fd 100%);
            overflow: hidden;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.15),
                0 0 0 1px rgba(0, 0, 0, 0.05) inset;
            position: relative;
        }

        #mapContainer::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.3), transparent 40%);
            pointer-events: none;
        }

        .continent {
            stroke: #ffffff;
            stroke-width: 1;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .continent:hover {
            filter: 
                brightness(1.1)
                drop-shadow(0 4px 12px rgba(0, 0, 0, 0.25));
            stroke-width: 1.5;
            stroke: #ffffff;
        }

        .continent.clicked {
            animation: clickPulse 0.6s ease;
        }

        @keyframes clickPulse {
            0% { 
                filter: brightness(1.2) drop-shadow(0 0 20px currentColor);
            }
            50% {
                filter: brightness(1.4) drop-shadow(0 0 30px currentColor);
            }
            100% { 
                filter: brightness(1) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
            }
        }

        #score {
            text-align: center;
            font-size: 1.3em;
            font-weight: 700;
            margin-top: 25px;
            color: #475569;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .score-value {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            min-width: 50px;
            transition: transform 0.2s ease;
        }

        .score-value.updated {
            animation: scoreUpdate 0.4s ease;
        }

        @keyframes scoreUpdate {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        #loading {
            text-align: center;
            padding: 80px;
            font-size: 1.2em;
            color: #64748b;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(102, 126, 234, 0.2);
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        svg {
            display: block;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <h1>üåç World Geography Game üåé</h1>
        <div id="info">Click on a continent to explore!</div>
        <div id="mapContainer">
            <div id="loading">
                <div class="spinner"></div>
                <div>Loading world map...</div>
            </div>
        </div>
        <div id="score">
            Total Clicks: <span class="score-value" id="clickCount">0</span>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js"></script>
    
    <script>
        const width = 1100;
        const height = 600;
        let clicks = 0;
        
        const continentColors = {
            'Africa': '#FFD700',      // Vibrant Yellow
            'Europe': '#E0115F',      // Vibrant Magenta/Purple
            'Asia': '#FF5733',        // Vibrant Red-Orange
            'North America': '#00A86B',// Vibrant Green
            'South America': '#9ACD32',// Vibrant Lime Green
            'Oceania': '#FF8C00',     // Vibrant Orange
            'Antarctica': '#f0f8ff'   // AliceBlue (very light)
        };
        
        const continentEmojis = {
            'Africa': 'ü¶Å',
            'Europe': 'üè∞',
            'Asia': 'üèØ',
            'North America': 'ü¶Ö',
            'South America': 'ü¶ú',
            'Oceania': 'ü¶ò',
            'Antarctica': 'üêß'
        };
        
        const infoDiv = d3.select('#info');
        const clickCountSpan = d3.select('#clickCount');
        
        const projection = d3.geoNaturalEarth1()
            .scale(180)
            .translate([width / 2, height / 2]);
        
        const path = d3.geoPath().projection(projection);
        
        const svg = d3.select('#mapContainer')
            .html('')
            .append('svg')
            .attr('width', width)
            .attr('height', height);
        
        d3.json('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json')
            .then(data => {
                const countries = topojson.feature(data, data.objects.countries);
                
                const continentMapping = {
                    'Africa': [12, 24, 72, 108, 120, 132, 140, 148, 174, 175, 178, 180, 204, 231, 232, 262, 266, 270, 288, 324, 384, 404, 426, 430, 434, 450, 454, 466, 478, 480, 504, 508, 516, 562, 566, 624, 638, 646, 654, 678, 686, 690, 694, 706, 710, 716, 728, 729, 732, 748, 768, 788, 800, 818, 834, 854, 894],
                    'Antarctica': [10],
                    'Asia': [4, 31, 48, 50, 51, 64, 96, 104, 116, 144, 156, 158, 196, 268, 275, 296, 344, 356, 360, 364, 368, 376, 392, 398, 400, 408, 410, 414, 417, 418, 422, 446, 458, 462, 496, 512, 524, 586, 608, 626, 634, 643, 682, 702, 704, 760, 762, 764, 784, 792, 795, 860, 887],
                    'Europe': [8, 20, 40, 51, 56, 70, 100, 191, 196, 203, 208, 233, 234, 246, 248, 250, 276, 292, 300, 336, 348, 352, 372, 380, 428, 438, 440, 442, 470, 492, 498, 499, 528, 578, 616, 620, 642, 674, 688, 703, 705, 724, 744, 752, 756, 804, 807, 826, 831, 832, 833],
                    'North America': [28, 44, 52, 60, 84, 92, 124, 136, 188, 192, 212, 214, 222, 304, 308, 312, 320, 328, 332, 388, 474, 484, 500, 530, 531, 533, 534, 535, 660, 662, 663, 666, 670, 740, 780, 796, 840, 850],
                    'Oceania': [16, 36, 90, 162, 184, 242, 258, 296, 316, 520, 548, 554, 570, 574, 580, 583, 584, 585, 598, 612, 772, 776, 798, 876, 882],
                    'South America': [32, 68, 76, 152, 170, 218, 238, 239, 254, 328, 600, 604, 740, 858, 862]
                };
                
                const countryToContinent = {};
                for (const [continent, ids] of Object.entries(continentMapping)) {
                    ids.forEach(id => {
                        countryToContinent[id] = continent;
                    });
                }
                
                const continentData = {};
                countries.features.forEach(feature => {
                    const id = parseInt(feature.id);
                    const continent = countryToContinent[id] || 'Unknown';
                    
                    if (continent !== 'Unknown') {
                        if (!continentData[continent]) {
                            continentData[continent] = [];
                        }
                        continentData[continent].push(feature);
                    }
                });
                
                for (const [continent, features] of Object.entries(continentData)) {
                    const g = svg.append('g')
                        .attr('class', 'continent-group')
                        .attr('data-continent', continent);
                    
                    features.forEach(feature => {
                        g.append('path')
                            .datum(feature)
                            .attr('class', 'continent')
                            .attr('d', path)
                            .attr('fill', continentColors[continent] || '#999')
                            .on('mouseenter', function() {
                                const countryName = feature.properties.name;
                                const color = continentColors[continent] || '#64748b';
                                const emoji = continentEmojis[continent] || 'üåç';
                                infoDiv.html(`${emoji} Hovering over <strong style="color: ${color};">${countryName}</strong>`);
                            })
                            .on('mouseleave', function() {
                                if (!this.classList.contains('clicked')) {
                                    infoDiv.html('Click on a continent to explore!');
                                }
                            })
                            .on('click', function() {
                                clicks++;
                                clickCountSpan.text(clicks)
                                    .classed('updated', true);
                                setTimeout(() => clickCountSpan.classed('updated', false), 400);
                                
                                const emoji = continentEmojis[continent] || 'üåç';
                                const color = continentColors[continent] || '#64748b';
                                infoDiv.html(`<span class="emoji">${emoji}</span> You clicked on <strong style="color: ${color};">${continent}</strong>!`)
                                    .classed('success', true);
                                
                                d3.select(this.parentNode).selectAll('path')
                                    .classed('clicked', true);
                                
                                setTimeout(() => {
                                    d3.select(this.parentNode).selectAll('path')
                                        .classed('clicked', false);
                                    infoDiv.classed('success', false);
                                }, 600);
                            });
                    });
                }
            })
            .catch(error => {
                d3.select('#loading').html('<div>‚ùå Error loading map data. Please refresh the page.</div>');
                console.error('Error loading map:', error);
            });
    </script>
</body>
</html>



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocabulary Graphic Organizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #E0F2FE; /* A light sky blue */
        }
        /* Custom colors inspired by the image */
        .organizer-bg-peach { background-color: #FFEDD5; } /* Tailwind orange-100 */
        .organizer-border-peach { border-color: #FED7AA; } /* Tailwind orange-200 */
        .organizer-text-peach-dark { color: #9A3412; } /* Tailwind orange-800 */

        .organizer-bg-teal { background-color: #CFFAFE; } /* Tailwind cyan-100 */
        .organizer-border-teal { border-color: #A5F3FC; } /* Tailwind cyan-200 */
        .organizer-text-teal-dark { color: #0E7490; } /* Tailwind cyan-700 */

        .section-card {
            border-width: 1px;
            border-radius: 0.5rem; /* rounded-lg */
            padding: 0.75rem; /* p-3 */
            box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.05); /* Softer shadow */
            margin-bottom: 0.75rem; /* mb-3 */
        }
        .section-title {
            font-weight: 600; /* font-semibold */
            margin-bottom: 0.375rem; /* mb-1.5 */
            display: flex;
            align-items: center;
            font-size: 0.9375rem; /* Slightly smaller title */
        }
        .section-title-dot {
            width: 0.4375rem; /* w-1.5 */
            height: 0.4375rem; /* h-1.5 */
            border-radius: 9999px; /* rounded-full */
            margin-right: 0.375rem; /* mr-1.5 */
        }
        .output-area {
            min-height: 50px; /* Reduced min-height */
            padding: 0.375rem; /* p-1.5 */
            border-radius: 0.25rem; /* rounded-sm */
            background-color: #ffffff;
            font-size: 0.875rem; /* text-sm */
            line-height: 1.25rem; /* leading-tight */
            color: #374151; /* Tailwind gray-700 */
        }
        textarea.output-area {
            width: 100%;
            border: 1px solid #D1D5DB; /* Tailwind gray-300 */
        }
        .tag-list span {
            display: inline-block;
            background-color: #F3F4F6; /* Tailwind gray-100 */
            color: #374151; /* Tailwind gray-700 */
            padding: 0.125rem 0.625rem; /* py-0.5 px-2.5 */
            margin: 0.125rem; /* m-0.5 */
            border-radius: 9999px; /* rounded-full */
            font-size: 0.8125rem; /* Slightly smaller tags */
        }
        /* Loading spinner */
        .loader {
            border: 3px solid #f3f4f6; /* Light grey */
            border-top: 3px solid #3b82f6; /* Blue */
            border-radius: 50%;
            width: 20px; /* Slightly smaller spinner */
            height: 20px;
            animation: spin 1s linear infinite;
            margin-right: 0.5rem; /* mr-2 */
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="p-3 md:p-6">
    <div class="max-w-4xl mx-auto bg-white p-4 md:p-6 rounded-xl shadow-lg">
        <header class="text-center mb-4 md:mb-6">
            <h1 class="text-xl md:text-2xl font-bold organizer-text-teal-dark flex items-center justify-center">
                <span class="w-2.5 h-2.5 bg-yellow-400 rounded-full mr-2"></span>
                Vocabulary Graphic Organizer
                <span class="w-2.5 h-2.5 bg-yellow-400 rounded-full ml-2"></span>
            </h1>
        </header>

        <div class="mb-4">
            <label for="wordInput" class="block text-sm font-medium text-gray-700 mb-1">Enter a word:</label>
            <div class="flex space-x-2">
                <input type="text" id="wordInput" class="flex-grow block w-full px-3 py-1.5 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="e.g., happy">
                <button id="lookupButton" class="px-3 py-1.5 bg-indigo-600 text-white font-semibold rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center justify-center">
                    <span id="buttonText">Lookup</span>
                    <div id="loader" class="loader hidden ml-1.5"></div>
                </button>
            </div>
            <p id="apiMessage" class="text-sm text-gray-500 mt-2 min-h-[1.25rem]"></p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4">
            <div class="section-card organizer-bg-peach organizer-border-peach">
                <h2 class="section-title organizer-text-peach-dark">
                    <span class="section-title-dot" style="background-color: #FDBA74;"></span>
                    Word
                </h2>
                <div id="wordDisplay" class="output-area font-bold text-md organizer-text-peach-dark"></div>
            </div>
            
            <div class="section-card organizer-bg-teal organizer-border-teal">
                <h2 class="section-title organizer-text-teal-dark">
                    <span class="section-title-dot" style="background-color: #67E8F9;"></span>
                    Part(s) of Speech
                </h2>
                <div id="partOfSpeechArea" class="output-area tag-list">
                    <span class="text-gray-400 italic">Part(s) of speech will appear here...</span>
                </div>
            </div>
            
            <div class="section-card organizer-bg-teal organizer-border-teal md:col-span-2">
                <h2 class="section-title organizer-text-teal-dark">
                    <span class="section-title-dot" style="background-color: #67E8F9;"></span>
                    Dictionary Definition
                </h2>
                <div id="dictionaryDefinitionArea" class="output-area">
                    <span class="text-gray-400 italic">Dictionary definition will appear here...</span>
                </div>
            </div>
            
            <div class="section-card organizer-bg-teal organizer-border-teal md:col-span-2">
                <h2 class="section-title organizer-text-teal-dark">
                    <span class="section-title-dot" style="background-color: #67E8F9;"></span>
                    Your Definition
                </h2>
                <textarea id="userDefinition" class="output-area" rows="2" placeholder="Write your definition here..."></textarea>
            </div>


            <div class="section-card organizer-bg-teal organizer-border-teal">
                <h2 class="section-title organizer-text-teal-dark">
                    <span class="section-title-dot" style="background-color: #67E8F9;"></span>
                    Synonyms
                </h2>
                <div id="synonymsArea" class="output-area tag-list">
                    <span class="text-gray-400 italic">Synonyms will appear here...</span>
                </div>
            </div>

            <div class="section-card organizer-bg-teal organizer-border-teal">
                <h2 class="section-title organizer-text-teal-dark">
                    <span class="section-title-dot" style="background-color: #67E8F9;"></span>
                    Antonyms
                </h2>
                <div id="antonymsArea" class="output-area tag-list">
                    <span class="text-gray-400 italic">Antonyms will appear here...</span>
                </div>
            </div>
        </div>

        <div class="mt-3 md:mt-4 section-card organizer-bg-peach organizer-border-peach">
            <h2 class="section-title organizer-text-peach-dark">
                <span class="section-title-dot" style="background-color: #FDBA74;"></span>
                Use it in a sentence
            </h2>
            <textarea id="userSentence" class="output-area" rows="2" placeholder="Write your sentence here..."></textarea>
        </div>
    </div>

    <script>
        // Get references to DOM elements
        const wordInput = document.getElementById('wordInput');
        const lookupButton = document.getElementById('lookupButton');
        const buttonText = document.getElementById('buttonText');
        const loader = document.getElementById('loader');
        const apiMessage = document.getElementById('apiMessage');
        const wordDisplay = document.getElementById('wordDisplay');
        const synonymsArea = document.getElementById('synonymsArea');
        const antonymsArea = document.getElementById('antonymsArea');
        const partOfSpeechArea = document.getElementById('partOfSpeechArea');
        const dictionaryDefinitionArea = document.getElementById('dictionaryDefinitionArea'); 
        // User input textareas are not directly manipulated by API results
        // const userDefinition = document.getElementById('userDefinition');
        // const userSentence = document.getElementById('userSentence');

        // Add event listeners
        lookupButton.addEventListener('click', fetchWordData);
        wordInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                fetchWordData();
            }
        });

        // Async function to fetch data from the dictionary API
        async function fetchWordData() {
            const word = wordInput.value.trim();
            if (!word) {
                apiMessage.textContent = 'Please enter a word.';
                apiMessage.className = 'text-sm text-red-500 mt-2 min-h-[1.25rem]';
                return;
            }

            // Update UI to show loading state
            buttonText.classList.add('hidden');
            loader.classList.remove('hidden');
            lookupButton.disabled = true;
            apiMessage.textContent = 'Looking up word...';
            apiMessage.className = 'text-sm text-gray-500 mt-2 min-h-[1.25rem]';

            // Clear previous results and set loading messages
            wordDisplay.textContent = word;
            synonymsArea.innerHTML = '<span class="text-gray-400 italic">Loading...</span>';
            antonymsArea.innerHTML = '<span class="text-gray-400 italic">Loading...</span>';
            partOfSpeechArea.innerHTML = '<span class="text-gray-400 italic">Loading...</span>';
            dictionaryDefinitionArea.innerHTML = '<span class="text-gray-400 italic">Loading...</span>';

            try {
                // Fetch data from the API
                const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
                
                if (!response.ok) {
                    const errorData = await response.json(); 
                    throw new Error(errorData.title || `Error: ${response.status}`);
                }

                const data = await response.json(); 
                displayData(data); 
                apiMessage.textContent = `Successfully fetched data for "${word}".`;
                apiMessage.className = 'text-sm text-green-600 mt-2 min-h-[1.25rem]';

            } catch (error) {
                console.error('Error fetching word data:', error);
                apiMessage.textContent = error.message.includes("No Definitions Found") ? `No definitions found for "${word}". Try another word.` : `Error: ${error.message}`;
                apiMessage.className = 'text-sm text-red-500 mt-2 min-h-[1.25rem]';
                // Set "Not available" messages for data areas on error
                synonymsArea.innerHTML = '<span class="text-gray-400 italic">Not available.</span>';
                antonymsArea.innerHTML = '<span class="text-gray-400 italic">Not available.</span>';
                partOfSpeechArea.innerHTML = '<span class="text-gray-400 italic">Not available.</span>';
                dictionaryDefinitionArea.innerHTML = '<span class="text-gray-400 italic">Not available.</span>';
            } finally {
                // Reset UI from loading state
                buttonText.classList.remove('hidden');
                loader.classList.add('hidden');
                lookupButton.disabled = false;
            }
        }

        // Function to process and display the fetched data
        function displayData(data) {
            const entry = data[0]; 
            if (!entry) {
                apiMessage.textContent = `No data found for "${wordInput.value.trim()}".`;
                apiMessage.className = 'text-sm text-red-500 mt-2 min-h-[1.25rem]';
                synonymsArea.innerHTML = '<span class="text-gray-400 italic">Not found.</span>';
                antonymsArea.innerHTML = '<span class="text-gray-400 italic">Not found.</span>';
                partOfSpeechArea.innerHTML = '<span class="text-gray-400 italic">Not found.</span>';
                dictionaryDefinitionArea.innerHTML = '<span class="text-gray-400 italic">Not found.</span>';
                return;
            }

            let allSynonyms = new Set();
            let allAntonyms = new Set();
            let allPartsOfSpeech = new Set();
            let firstDefinition = null;

            if (entry.meanings && Array.isArray(entry.meanings)) {
                entry.meanings.forEach(meaning => {
                    if (meaning.partOfSpeech) {
                        allPartsOfSpeech.add(meaning.partOfSpeech);
                    }
                    if (meaning.synonyms && Array.isArray(meaning.synonyms)) {
                        meaning.synonyms.forEach(syn => allSynonyms.add(syn));
                    }
                    if (meaning.antonyms && Array.isArray(meaning.antonyms)) {
                        meaning.antonyms.forEach(ant => allAntonyms.add(ant));
                    }
                    
                    if (!firstDefinition && meaning.definitions && Array.isArray(meaning.definitions) && meaning.definitions.length > 0) {
                        firstDefinition = meaning.definitions[0].definition;
                    }

                    // This nested loop was to catch synonyms/antonyms within individual definitions,
                    // which is sometimes present in the API structure.
                    if (meaning.definitions && Array.isArray(meaning.definitions)) {
                        meaning.definitions.forEach(def => {
                            if (def.synonyms && Array.isArray(def.synonyms)) {
                                def.synonyms.forEach(syn => allSynonyms.add(syn));
                            }
                            if (def.antonyms && Array.isArray(def.antonyms)) {
                                def.antonyms.forEach(ant => allAntonyms.add(ant));
                            }
                        });
                    }
                });
            }
            
            renderTags(synonymsArea, Array.from(allSynonyms), 'No synonyms found.');
            renderTags(antonymsArea, Array.from(allAntonyms), 'No antonyms found.');
            renderTags(partOfSpeechArea, Array.from(allPartsOfSpeech), 'No part of speech information available.');

            if (firstDefinition) {
                dictionaryDefinitionArea.textContent = firstDefinition;
            } else {
                dictionaryDefinitionArea.innerHTML = '<span class="text-gray-400 italic">No definition available.</span>';
            }
        }

        // Helper function to render items as tags
        function renderTags(areaElement, items, emptyMessage) {
            areaElement.innerHTML = ''; 
            if (items.length > 0) {
                items.forEach(item => {
                    const span = document.createElement('span');
                    span.textContent = item;
                    areaElement.appendChild(span);
                });
            } else {
                const span = document.createElement('span');
                span.className = 'text-gray-400 italic';
                span.textContent = emptyMessage;
                areaElement.appendChild(span);
            }
        }
    </script>
</body>
</html>
